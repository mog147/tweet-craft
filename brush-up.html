<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Tweet Craft - „Éñ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó</title>
    <style>
        :root {
            --accent: #1d9bf0;
            --accent2: #8ecdf7;
            --green: #00ba7c;
            --pink: #f472b6;
            --purple: #a78bfa;
            --orange: #fb923c;
            --red: #f87171;
            --yellow: #fbbf24;
            --radius: 16px
        }

        [data-theme="dark"] {
            --bg: #000;
            --surface: #16181c;
            --surface2: #1d1f23;
            --surface3: #2f3336;
            --border: #2f3336;
            --text: #e7e9ea;
            --text2: #71767b;
            --text3: #536471;
            --card-shadow: none
        }

        [data-theme="light"] {
            --bg: #f7f9f9;
            --surface: #fff;
            --surface2: #eff3f4;
            --surface3: #cfd9de;
            --border: #eff3f4;
            --text: #0f1419;
            --text2: #536471;
            --text3: #8899a6;
            --card-shadow: 0 1px 3px rgba(0, 0, 0, .08)
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            min-height: 100dvh;
            transition: background .2s, color .2s
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 50;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background .2s;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px)
        }

        [data-theme="dark"] .header {
            background: rgba(0, 0, 0, .75)
        }

        [data-theme="light"] .header {
            background: rgba(247, 249, 249, .85)
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--accent);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #fff;
            font-weight: 900
        }

        .logo h1 {
            font-size: 17px;
            font-weight: 800
        }

        .logo h1 span {
            color: var(--accent)
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 8px
        }

        .theme-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text);
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .15s;
            -webkit-tap-highlight-color: transparent
        }

        .theme-btn:hover {
            background: var(--surface2)
        }

        /* Page Nav */
        .page-nav {
            display: flex;
            gap: 2px;
            background: var(--surface2);
            border-radius: 12px;
            padding: 3px;
        }

        .page-nav a {
            padding: 7px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            text-decoration: none;
            color: var(--text2);
            transition: all .15s;
            -webkit-tap-highlight-color: transparent;
        }

        .page-nav a.active {
            background: var(--accent);
            color: #fff;
        }

        .page-nav a:hover:not(.active) {
            color: var(--text);
            background: var(--surface3);
        }

        /* Container */
        .container {
            max-width: 620px;
            margin: 0 auto;
            padding: 16px 12px 100px
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: var(--surface2);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 10px 24px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            z-index: 999;
            opacity: 0;
            transition: all .25s;
            pointer-events: none;
            white-space: nowrap
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0)
        }

        /* Brush up page styles */
        .page-title {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .page-desc {
            font-size: 13px;
            color: var(--text2);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Input area */
        .input-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--card-shadow);
        }

        .input-label {
            font-size: 13px;
            font-weight: 700;
            color: var(--text2);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .input-area {
            width: 100%;
            min-height: 120px;
            padding: 14px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--surface2);
            color: var(--text);
            font-family: inherit;
            font-size: 15px;
            line-height: 1.7;
            resize: vertical;
            transition: border-color .15s;
            outline: none;
        }

        .input-area::placeholder {
            color: var(--text3);
        }

        .input-area:focus {
            border-color: var(--accent);
        }

        .input-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .char-info {
            font-size: 12px;
            color: var(--text3);
        }

        .char-info.over {
            color: var(--red);
            font-weight: 700;
        }

        .clear-btn {
            font-size: 12px;
            color: var(--text3);
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all .12s;
        }

        .clear-btn:hover {
            color: var(--text);
            background: var(--surface3);
        }

        /* Style selection */
        .style-section {
            margin-bottom: 16px;
        }

        .style-label {
            font-size: 13px;
            font-weight: 700;
            color: var(--text2);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .style-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .style-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 14px;
            padding: 14px 10px;
            cursor: pointer;
            text-align: center;
            transition: all .15s;
            -webkit-tap-highlight-color: transparent;
        }

        .style-card:hover {
            border-color: var(--surface3);
            background: var(--surface2);
        }

        .style-card.selected {
            border-color: var(--accent);
            background: rgba(29, 155, 240, .06);
        }

        .style-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .style-name {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .style-desc {
            font-size: 10px;
            color: var(--text3);
            line-height: 1.4;
        }

        .style-card.selected .style-name {
            color: var(--accent);
        }

        /* Generate button */
        .generate-btn {
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 800;
            cursor: pointer;
            border: none;
            background: var(--accent);
            color: #fff;
            transition: all .15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            -webkit-tap-highlight-color: transparent;
        }

        .generate-btn:hover {
            opacity: .88;
        }

        .generate-btn:active {
            transform: scale(.98);
        }

        .generate-btn:disabled {
            opacity: .4;
            cursor: not-allowed;
            transform: none;
        }

        /* Results */
        .results-header {
            font-size: 13px;
            font-weight: 700;
            color: var(--text2);
            margin-bottom: 12px;
            display: none;
            align-items: center;
            gap: 6px;
        }

        .results-header.visible {
            display: flex;
        }

        .result-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--card-shadow);
            transition: all .15s;
            animation: fadeUp .3s ease;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(12px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-card:hover {
            border-color: var(--surface3);
        }

        .result-style-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 99px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .badge-sensible {
            background: rgba(167, 139, 250, .12);
            color: var(--purple);
            border: 1px solid rgba(167, 139, 250, .2);
        }

        .badge-empathy {
            background: rgba(244, 114, 182, .12);
            color: var(--pink);
            border: 1px solid rgba(244, 114, 182, .2);
        }

        .badge-passion {
            background: rgba(251, 146, 60, .12);
            color: var(--orange);
            border: 1px solid rgba(251, 146, 60, .2);
        }

        .result-body {
            font-size: 15px;
            line-height: 1.75;
            margin-bottom: 12px;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .result-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .result-char {
            font-size: 11px;
            color: var(--text3);
        }

        .result-char.over {
            color: var(--red);
            font-weight: 700;
        }

        .result-label {
            font-size: 11px;
            color: var(--text3);
        }

        .btn-row {
            display: flex;
            gap: 6px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all .12s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            -webkit-tap-highlight-color: transparent;
        }

        .action-btn.primary {
            background: var(--accent);
            color: #fff;
        }

        .action-btn.primary:hover {
            opacity: .85;
        }

        .action-btn.primary:active {
            transform: scale(.97);
        }

        .action-btn.secondary {
            background: var(--surface2);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .action-btn.secondary:hover {
            background: var(--surface3);
        }

        .action-btn.copied {
            background: var(--green);
            color: #fff;
            border-color: var(--green);
        }

        /* Tip card */
        .tip-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            margin-top: 24px;
            box-shadow: var(--card-shadow);
        }

        .tip-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tip-list {
            list-style: none;
            font-size: 13px;
            color: var(--text2);
            line-height: 1.8;
        }

        .tip-list li {
            padding-left: 16px;
            position: relative;
        }

        .tip-list li::before {
            content: '¬∑';
            position: absolute;
            left: 4px;
            color: var(--text3);
            font-weight: 800;
        }

        /* Responsive */
        @media(max-width:480px) {
            .container {
                padding: 12px 8px 100px
            }

            .style-grid {
                grid-template-columns: 1fr;
                gap: 6px;
            }

            .style-card {
                display: flex;
                align-items: center;
                gap: 12px;
                text-align: left;
                padding: 12px 14px;
            }

            .style-icon {
                font-size: 20px;
                margin-bottom: 0;
            }

            .header {
                padding: 10px 12px
            }

            .result-body {
                font-size: 14.5px;
            }

            .page-nav a {
                padding: 6px 10px;
                font-size: 11px;
            }
        }
    </style>
</head>

<body>
    <div class="toast" id="toast"></div>

    <div class="header">
        <div class="logo">
            <div class="logo-icon">X</div>
            <h1><span>Tweet</span> Craft</h1>
        </div>
        <div class="header-actions">
            <nav class="page-nav">
                <a href="index.html">&#128221; „Éù„Çπ„ÉàÈõÜ</a>
                <a href="brush-up.html" class="active">&#10024; „Éñ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó</a>
            </nav>
            <button class="theme-btn" id="theme-btn" onclick="toggleTheme()" aria-label="„ÉÜ„Éº„ÉûÂàáÊõø"></button>
        </div>
    </div>

    <div class="container">
        <div class="page-title">&#10024; „Éñ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó</div>
        <p class="page-desc">„ÅÇ„Å™„Åü„ÅÆË®ÄËëâ„Çí„ÄÅX„ÅßË™∞„Åã„ÅÆÂøÉ„Å´„Åù„Å£„Å®Â±ä„ÅèË°®Áèæ„Å´Êï¥„Åà„Åæ„Åô„ÄÇ<br>ÊñáÁ´†„ÇíÂÖ•Âäõ„Åó„Å¶„ÄÅ„ÅäÂ•Ω„Åø„ÅÆ„Çπ„Çø„Ç§„É´„ÇíÈÅ∏„Çì„Åß„Åø„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ</p>

        <!-- Input -->
        <div class="input-section">
            <div class="input-label">&#128394;&#65039; „ÅÇ„Å™„Åü„ÅÆÊñáÁ´†</div>
            <textarea class="input-area" id="input-text"
                placeholder="„Åì„Åì„Å´„ÄÅ„Éù„Çπ„Éà„Åó„Åü„ÅÑÊñáÁ´†„ÇíÂÖ•Âäõ„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ‚Ä¶&#10;&#10;‰æã: „Éá„Ç∂„Ç§„É≥Âßã„ÇÅ„Å¶ÂçäÂπ¥„ÄÇÊØéÊó•FigmaËß¶„Å£„Å¶„Åü„Çâ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà‰Ωú„Çå„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü„ÄÇ"></textarea>
            <div class="input-footer">
                <span class="char-info" id="char-info">0 / 140</span>
                <button class="clear-btn" onclick="clearInput()">„ÇØ„É™„Ç¢</button>
            </div>
        </div>

        <!-- Style selection -->
        <div class="style-section">
            <div class="style-label">&#127912; „Çπ„Çø„Ç§„É´„ÇíÈÅ∏„Å∂</div>
            <div class="style-grid">
                <div class="style-card selected" data-style="sensible" onclick="selectStyle('sensible', this)">
                    <div class="style-icon">&#127807;</div>
                    <div>
                        <div class="style-name">ÁπäÁ¥∞„ÉªÂÜÖÁúÅÂûã</div>
                        <div class="style-desc">„Åù„Å£„Å®„ÄÅÈùô„Åã„Å´„ÄÅÂøÉ„ÅÆÂÜÖÂÅ¥„Åã„Çâ</div>
                    </div>
                </div>
                <div class="style-card" data-style="empathy" onclick="selectStyle('empathy', this)">
                    <div class="style-icon">&#128171;</div>
                    <div>
                        <div class="style-name">ÂÖ±ÊÑü„ÉªÂØÑ„ÇäÊ∑ª„ÅÑÂûã</div>
                        <div class="style-desc">„ÅÇ„Å™„Åü„ÇÇ„Åù„ÅÜÔºü‰∏ÄÁ∑í„Å´„Å≠</div>
                    </div>
                </div>
                <div class="style-card" data-style="passion" onclick="selectStyle('passion', this)">
                    <div class="style-icon">&#128293;</div>
                    <div>
                        <div class="style-name">ÊÉÖÁÜ±„Éª„Çπ„Éà„Éº„É™„ÉºÂûã</div>
                        <div class="style-desc">„ÅÇ„ÅÆÊó•„ÄÅÊ∞ó„Å•„ÅÑ„Åü„ÄÇÂ§â„Çè„Å£„Åü„ÄÇ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Generate button -->
        <button class="generate-btn" id="generate-btn" onclick="brushUp()">&#10024; „Éñ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó„Åô„Çã</button>

        <!-- Results -->
        <div class="results-header" id="results-header">&#128140; Â§âÊèõÁµêÊûú</div>
        <div id="results-list"></div>

        <!-- Tips -->
        <div class="tip-card">
            <div class="tip-title">&#128161; ÂøÉ„Çí„Å§„Åã„ÇÄ„Éù„Çπ„Éà„ÅÆ„Ç≥„ÉÑ</div>
            <ul class="tip-list">
                <li>ÂÜíÈ†≠„ÅÆ1Ë°å„Åß„ÄåÂÖ±ÊÑü„Äç„Åã„ÄåÂïè„ÅÑ„Åã„Åë„Äç„Çí</li>
                <li>Êñ≠ÂÆö„Çà„Çä„Äå„Äú„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„Äç„Åß‰ΩôÁôΩ„ÇíÊÆã„Åô</li>
                <li>‰ΩìÈ®ì„Çí‰∫§„Åà„Çã„Å®„ÄÅ„Åê„Å£„Å®‰ºù„Çè„Çä„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åô</li>
                <li>ÊúÄÂæå„Å´‰ΩôÈüª„ÇíÊÆã„ÅôÁµê„Å≥„ÇíÊ∑ª„Åà„Å¶„Åø„Å¶</li>
                <li>140ÊñáÂ≠ó‰ª•ÂÜÖ„Åå„Çø„Ç§„É†„É©„Ç§„É≥„ÅßË™≠„Åø„ÇÑ„Åô„ÅÑ„Åß„Åô</li>
            </ul>
        </div>
    </div>

    <script>
        // ===== THEME =====
        function initTheme() { const t = localStorage.getItem('tc-theme') || 'dark'; document.documentElement.dataset.theme = t; updateThemeIcon() }
        function toggleTheme() { const t = document.documentElement.dataset.theme === 'dark' ? 'light' : 'dark'; document.documentElement.dataset.theme = t; localStorage.setItem('tc-theme', t); updateThemeIcon() }
        function updateThemeIcon() { document.getElementById('theme-btn').textContent = document.documentElement.dataset.theme === 'dark' ? '‚òÄ' : '‚òæ' }
        initTheme();

        // ===== TOAST =====
        function showToast(msg) { const t = document.getElementById('toast'); t.textContent = msg; t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 1500) }

        // ===== INPUT =====
        const inputEl = document.getElementById('input-text');
        const charInfoEl = document.getElementById('char-info');

        inputEl.addEventListener('input', updateCharCount);

        function updateCharCount() {
            const len = inputEl.value.length;
            charInfoEl.textContent = len + ' / 140';
            charInfoEl.className = 'char-info' + (len > 140 ? ' over' : '');
        }

        function clearInput() {
            inputEl.value = '';
            updateCharCount();
            inputEl.focus();
        }

        // ===== STYLE SELECTION =====
        let currentStyle = 'sensible';

        function selectStyle(style, el) {
            currentStyle = style;
            document.querySelectorAll('.style-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
        }

        // ===== BRUSH UP ENGINE =====
        const transforms = {
            sensible: {
                label: 'üåø ÁπäÁ¥∞„ÉªÂÜÖÁúÅÂûã',
                badgeClass: 'badge-sensible',
                hooks: [
                    '„Åµ„Å®„ÄÅÊÄù„Å£„Åü„Åì„Å®„ÄÇ',
                    '„Å≤„Å®„Çä„ÅßÈùô„Åã„Å´ËÄÉ„Åà„Å¶„ÅÑ„Åü„Åì„Å®„ÄÇ',
                    'Ë®ÄËëâ„Å´„Åô„Çã„ÅãËø∑„Å£„Åü„Åë„Çå„Å©„ÄÇ',
                    '„Åù„Å£„Å®ÂøÉ„Å´Áïô„ÇÅ„Å¶„ÅÑ„Åü„Åì„Å®„ÄÇ',
                    'Â∞è„Åï„Å™Ê∞ó„Å•„Åç„ÅÆ„Åì„Å®„ÄÇ',
                ],
                endings: [
                    '„Åù„Çì„Å™„Åµ„ÅÜ„Å´„ÄÅÊÑü„Åò„Å¶„ÅÑ„Çã„ÄÇ',
                    '„Åù„ÅÜÊÄù„Åà„ÅüÊó•„Å†„Å£„Åü„ÄÇ',
                    'Â∞ë„Åó„Å†„Åë„ÄÅÂâç„Å´ÈÄ≤„ÇÅ„ÅüÊ∞ó„Åå„Åô„Çã„ÄÇ',
                    '„Åù„Çì„Å™Ëá™ÂàÜ„ÇÇ„ÄÅÊÇ™„Åè„Å™„ÅÑ„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„ÄÇ',
                    'Èùô„Åã„Å´„ÄÅ„Åù„ÅÜÊÄù„ÅÜ„ÄÇ',
                ],
                replaces: [
                    [/„Åô„Åî„Åè|„Å®„Å¶„ÇÇ|„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ|„Éû„Ç∏„Åß/g, '„Åù„Å£„Å®'],
                    [/Ê∞ó„Å•„ÅÑ„Åü/g, 'Ê∞ó„Å•„Åë„ÅüÊ∞ó„Åå„Åô„Çã'],
                    [/Â§ß‰∫ã„Å†|Â§ß‰∫ã„Åß„Åô|Â§ßÂàá„Å†/g, 'Â§ßÂàá„Å™„ÅÆ„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ'],
                    [/„Çè„Åã„Å£„Åü/g, 'Â∞ë„Åó„Å†„Åë„ÄÅ„Çè„Åã„Å£„ÅüÊ∞ó„Åå„Åô„Çã'],
                    [/„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü/g, '„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü‚Ä¶„ÅÆ„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ'],
                    [/ÊÄù„Å£„Åü(?!„ÄÇ)/g, 'ÊÄù„Åà„Åü'],
                    [/Â§â„Çè„Å£„Åü/g, 'Â∞ë„Åó„Å†„ÅëÂ§â„Çè„Å£„ÅüÊ∞ó„Åå„Åô„Çã'],
                    [/ÊúÄÂº∑|ÊúÄÈ´ò/g, 'ÂøÉÂº∑„ÅÑ'],
                    [/Áµ∂ÂØæ/g, '„Åç„Å£„Å®'],
                    [/„Åó„Çç|„Åó„Å™„Åï„ÅÑ/g, '„Åó„Å¶„Åø„Å¶'],
                    [/„Åπ„Åç„Å†|„Åô„Åπ„Åç/g, '„ÅÆ„ÇÇ„ÅÑ„ÅÑ„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ'],
                    [/ÔºÅ/g, '„ÄÇ'],
                    [/„Å†„ÄÇ$/g, '„Å™„ÅÆ„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„ÄÇ'],
                ],
            },
            empathy: {
                label: 'üí´ ÂÖ±ÊÑü„ÉªÂØÑ„ÇäÊ∑ª„ÅÑÂûã',
                badgeClass: 'badge-empathy',
                hooks: [
                    '„Åì„Çå„ÄÅÂêå„Åò„Çà„ÅÜ„Å´ÊÑü„Åò„Å¶„Çã‰∫∫„ÅÑ„Çã„Åã„Å™„ÄÇ',
                    '„Å≤„Å®„Çä„Åò„ÇÉ„Å™„ÅÑ„Çà„Å≠„ÄÅ„Åì„ÅÜ„ÅÑ„ÅÜÊ∞óÊåÅ„Å°„ÄÇ',
                    'Âêå„ÅòÈÅì„ÇíÊ≠©„ÅÑ„Å¶„ÅÑ„Çã‰∫∫„Å´Â±ä„ÅÑ„Åü„Çâ„ÅÑ„ÅÑ„Å™„ÄÇ',
                    '„ÅÇ„Å™„Åü„ÅØ„Å©„ÅÜ„Åß„Åô„ÅãÔºü',
                    '„ÇÇ„ÅóÂêå„Åò„Çà„ÅÜ„Å´ÊÇ©„Çì„Åß„ÅÑ„Åü„Çâ„ÄÇ',
                ],
                endings: [
                    'Âêå„ÅòÊ∞óÊåÅ„Å°„ÅÆ‰∫∫„Åå„ÅÑ„Åü„Çâ„ÄÅ„ÅÜ„Çå„Åó„ÅÑ„Å™„ÄÇ',
                    '„ÅÇ„Å™„Åü„ÅØ„ÄÅ„Å≤„Å®„Çä„Åò„ÇÉ„Å™„ÅÑ„Çà„ÄÇ',
                    '‰∏ÄÁ∑í„Å´„ÄÅÂ∞ë„Åó„Åö„Å§„ÄÇ',
                    '„Åç„Å£„Å®Â§ß‰∏àÂ§´„ÄÇ„Åù„ÅÜ‰ø°„Åò„Å¶„Çã„ÄÇ',
                    '„Åù„ÅÆÊ∞óÊåÅ„Å°„ÄÅ„Çè„Åã„Çã„Çà„ÄÇ',
                ],
                replaces: [
                    [/ÁßÅ„ÅØ|Ëá™ÂàÜ„ÅØ|‰ø∫„ÅØ|ÂÉï„ÅØ/g, 'ÁßÅ„Åü„Å°„ÅØ'],
                    [/Ê∞ó„Å•„ÅÑ„Åü/g, 'Ê∞ó„Å•„ÅÑ„Åü„Çì„Å†„Çà„Å≠'],
                    [/ÊÄù„Å£„Åü/g, 'ÊÄù„Å£„Åü„ÅÆ„ÄÅÁßÅ„Å†„Åë„Åã„Å™'],
                    [/Â§ß‰∫ã„Å†|Â§ß‰∫ã„Åß„Åô/g, 'Â§ß‰∫ã„Å†„Çà„Å≠'],
                    [/„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü/g, '„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü„Çì„Å†„Çà'],
                    [/„Çè„Åã„Å£„Åü/g, '„Çè„Åã„Å£„ÅüÊ∞ó„Åå„Åô„Çã„ÅÆ'],
                    [/„Åô„Åî„Åè|„Å®„Å¶„ÇÇ/g, '„Åª„Çì„Å®„ÅÜ„Å´'],
                    [/ÊúÄÂº∑|ÊúÄÈ´ò/g, '„Åã„Åë„Åå„Åà„ÅÆ„Å™„ÅÑ'],
                    [/Áµ∂ÂØæ/g, '„Åç„Å£„Å®'],
                    [/„Åó„Çç|„Åó„Å™„Åï„ÅÑ/g, '‰∏ÄÁ∑í„Å´„ÇÑ„Å£„Å¶„Åø„Çà„ÅÜ'],
                    [/„Åπ„Åç„Å†|„Åô„Åπ„Åç/g, '„ÅÆ„ÇÇ„ÅÑ„ÅÑ„Åã„ÇÇ„Å≠'],
                ],
            },
            passion: {
                label: 'üî• ÊÉÖÁÜ±„Éª„Çπ„Éà„Éº„É™„ÉºÂûã',
                badgeClass: 'badge-passion',
                hooks: [
                    '„ÅÇ„ÅÆÊó•„Åã„Çâ„ÄÅ‰Ωï„Åã„ÅåÂ§â„Çè„Å£„Åü„ÄÇ',
                    'Ê≠£Áõ¥„Å´Ë®Ä„Åä„ÅÜ„ÄÇ',
                    'ÂçäÂπ¥Ââç„ÅÆËá™ÂàÜ„Å´‰ºù„Åà„Åü„ÅÑ„Åì„Å®„ÄÇ',
                    'ÂøÉ„ÅåÂãï„ÅÑ„ÅüÁû¨Èñì„ÅÆË©±„ÄÇ',
                    'Âøò„Çå„Çâ„Çå„Å™„ÅÑÊó•„ÅÆ„Åì„Å®„ÄÇ',
                ],
                endings: [
                    '„ÅÇ„ÅÆ‰∏ÄÊ≠©„Åå„ÄÅ‰ªä„Å´„Å§„Å™„Åå„Å£„Å¶„ÅÑ„Çã„ÄÇ',
                    '„Å†„Åã„Çâ„ÄÅ‰ªäÊó•„ÇÇÊâã„ÇíÂãï„Åã„Åô„ÄÇ',
                    '„Åæ„Å†ÈÄî‰∏≠„ÄÇ„Åß„ÇÇ„ÄÅÁ¢∫„Åã„Å´ÈÄ≤„Çì„Åß„ÅÑ„Çã„ÄÇ',
                    'Âßã„ÇÅ„ÅüËá™ÂàÜ„Çí„ÄÅË§í„ÇÅ„Å¶„ÅÇ„Åí„Åü„ÅÑ„ÄÇ',
                    '„Åì„ÅÆÈÅì„ÇíÈÅ∏„Çì„Åß„Çà„Åã„Å£„Åü„ÄÇ',
                ],
                replaces: [
                    [/Ê∞ó„Å•„ÅÑ„Åü/g, 'Ê∞ó„Å•„ÅÑ„Åü„ÄÇ„ÅØ„Å£„Åç„Çä„Å®„ÄÇ'],
                    [/ÊÄù„Å£„Åü/g, 'ÂøÉ„ÅÆÂ••„ÅßÁ¢∫‰ø°„Åó„Åü'],
                    [/Â§ß‰∫ã„Å†|Â§ß‰∫ã„Åß„Åô|Â§ßÂàá„Å†/g, '„ÅÑ„Å°„Å∞„ÇìÂ§ßÂàá„Å™„Åì„Å®„Å†„Å£„Åü'],
                    [/„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü/g, '„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü„ÄÇ„ÅÇ„ÅÆÈ†É„ÅØÊÉ≥ÂÉè„ÇÇ„Åó„Å™„Åã„Å£„Åü'],
                    [/„Çè„Åã„Å£„Åü/g, 'Ë∫´„Çí„ÇÇ„Å£„Å¶Áü•„Å£„Åü'],
                    [/„Åô„Åî„Åè|„Å®„Å¶„ÇÇ/g, 'ÊÉ≥ÂÉè‰ª•‰∏ä„Å´'],
                    [/Â∞ë„Åó|„Å°„Çá„Å£„Å®/g, 'Á¢∫ÂÆü„Å´'],
                    [/„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ/g, '„Å´ÈÅï„ÅÑ„Å™„ÅÑ'],
                    [/„ÄÇ$/g, '„ÄÇ„Åì„Çå„Åã„Çâ„ÇÇ„ÄÇ'],
                ],
            },
        };

        function brushUp() {
            const raw = inputEl.value.trim();
            if (!raw) {
                showToast('ÊñáÁ´†„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠');
                inputEl.focus();
                return;
            }

            const style = transforms[currentStyle];
            const results = generateVariations(raw, style);

            const header = document.getElementById('results-header');
            header.classList.add('visible');

            const listEl = document.getElementById('results-list');
            listEl.innerHTML = results.map((r, i) => {
                const charCount = r.length;
                return `<div class="result-card" style="animation-delay:${i * 0.08}s">
          <span class="result-style-badge ${style.badgeClass}">${style.label} #${i + 1}</span>
          <div class="result-body">${escapeHtml(r)}</div>
          <div class="result-meta">
            <span class="result-label">„Éë„Çø„Éº„É≥ ${i + 1}</span>
            <span class="result-char ${charCount > 140 ? 'over' : ''}">${charCount}/140</span>
          </div>
          <div class="btn-row">
            <button class="action-btn primary" id="rcopy-${i}" onclick="copyResult(${i}, 'rcopy-${i}')">&#128203; „Ç≥„Éî„Éº„Åô„Çã</button>
            <button class="action-btn secondary" onclick="postResult(${i})" title="X„ÅßÊäïÁ®ø">&#120143; „Éù„Çπ„Éà„Åô„Çã</button>
          </div>
        </div>`;
            }).join('');

            // Smooth scroll to results
            setTimeout(() => header.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
        }

        function generateVariations(text, style) {
            const variations = [];

            // Variation 1: „Éï„ÉÉ„ÇØ + Â§âÊèõ„ÉÜ„Ç≠„Çπ„Éà
            const hook1 = style.hooks[Math.floor(Math.random() * style.hooks.length)];
            let v1 = applyReplaces(text, style.replaces);
            v1 = hook1 + '\n\n' + v1;
            if (v1.length > 140) v1 = trimToFit(v1, 140);
            variations.push(v1);

            // Variation 2: Â§âÊèõ„ÉÜ„Ç≠„Çπ„Éà + ‰ΩôÈüª„ÅÆ„ÅÇ„ÇãÁµê„Å≥
            const ending1 = style.endings[Math.floor(Math.random() * style.endings.length)];
            let v2 = applyReplaces(text, style.replaces);
            v2 = v2 + '\n\n' + ending1;
            if (v2.length > 140) v2 = trimToFit(v2, 140);
            variations.push(v2);

            // Variation 3: „Éï„ÉÉ„ÇØ + Â§âÊèõ„ÉÜ„Ç≠„Çπ„Éà + Áµê„Å≥ÔºàÁü≠„ÅÑÂ†¥Âêà„ÅÆ„ÅøÔºâ
            let hook2 = style.hooks[Math.floor(Math.random() * style.hooks.length)];
            let ending2 = style.endings[Math.floor(Math.random() * style.endings.length)];
            // Avoid same hook/ending as v1/v2
            while (hook2 === hook1) hook2 = style.hooks[Math.floor(Math.random() * style.hooks.length)];
            while (ending2 === ending1) ending2 = style.endings[Math.floor(Math.random() * style.endings.length)];
            let v3 = applyReplaces(text, style.replaces);
            v3 = hook2 + '\n\n' + v3 + '\n\n' + ending2;
            if (v3.length > 140) v3 = trimToFit(v3, 140);
            variations.push(v3);

            return variations;
        }

        function applyReplaces(text, replaces) {
            let result = text;
            for (const [pattern, replacement] of replaces) {
                result = result.replace(pattern, replacement);
            }
            return result;
        }

        function trimToFit(text, max) {
            if (text.length <= max) return text;
            // Try to cut at a sentence boundary
            let cut = text.substring(0, max - 1);
            const lastPeriod = cut.lastIndexOf('„ÄÇ');
            const lastNewline = cut.lastIndexOf('\n');
            const cutPoint = Math.max(lastPeriod, lastNewline);
            if (cutPoint > max * 0.5) {
                return text.substring(0, cutPoint + 1);
            }
            return cut + '‚Ä¶';
        }

        function escapeHtml(str) {
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>');
        }

        // ===== RESULTS STORAGE (for copy/post) =====
        function getResults() {
            const cards = document.querySelectorAll('.result-body');
            return Array.from(cards).map(c => c.textContent);
        }

        function copyResult(idx, btnId) {
            const results = getResults();
            navigator.clipboard.writeText(results[idx]).then(() => {
                const btn = document.getElementById(btnId);
                btn.classList.add('copied');
                btn.innerHTML = '&#10003; „Ç≥„Éî„ÉºÂÆå‰∫Ü!';
                showToast('‚úì „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü');
                setTimeout(() => { btn.classList.remove('copied'); btn.innerHTML = '&#128203; „Ç≥„Éî„Éº„Åô„Çã'; }, 2000);
            });
        }

        function postResult(idx) {
            const results = getResults();
            const text = encodeURIComponent(results[idx]);
            window.open('https://twitter.com/intent/tweet?text=' + text, '_blank');
        }
    </script>
</body>

</html>